<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>lib.server.mqttmessages API documentation</title>
<meta name="description" content="Mqtt messages classes" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>lib.server.mqttmessages</code></h1>
</header>
<section id="section-intro">
<p>Mqtt messages classes</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># Distributed under Pycameresp License
# Copyright (c) 2023 Remi BERTHOLET
# pylint:disable=consider-using-f-string
&#34;&#34;&#34; Mqtt messages classes &#34;&#34;&#34;
import io
import wifi.hostname
import server.stream
import tools.strings

MQTT_UNDEFINED   = 0
MQTT_CONNECT     = 1  # Client to Server                     : Client request to connect to Server
MQTT_CONNACK     = 2  # Server to Client                     : Connect acknowledgment
MQTT_PUBLISH     = 3  # Client to Server or Server to Client : Publish message
MQTT_PUBACK      = 4  # Client to Server or Server to Client : Publish acknowledgment
MQTT_PUBREC      = 5  # Client to Server or Server to Client : Publish received (assured delivery part 1)
MQTT_PUBREL      = 6  # Client to Server or Server to Client : Publish release (assured delivery part 2)
MQTT_PUBCOMP     = 7  # Client to Server or Server to Client : Publish complete (assured delivery part 3)
MQTT_SUBSCRIBE   = 8  # Client to Server                     : Client subscribe request
MQTT_SUBACK      = 9  # Server to Client                     : Subscribe acknowledgment
MQTT_UNSUBSCRIBE = 10 # Client to Server                     : Unsubscribe request
MQTT_UNSUBACK    = 11 # Server to Client                     : Unsubscribe acknowledgment
MQTT_PINGREQ     = 12 # Client to Server                     : PING request
MQTT_PINGRESP    = 13 # Server to Client                     : PING response
MQTT_DISCONNECT  = 14 # Client to Server                     : Client is disconnecting

MQTT_QOS_ONCE         = 0 # At most once delivery
MQTT_QOS_LEAST_ONCE   = 1 # At least once delivery
MQTT_QOS_EXACTLY_ONCE = 2 # Exactly once delivery

MQTT_CONNACK_ACCEPTED              = 0 # Connection Accepted
MQTT_CONNACK_UNACCEPTABLE_PROTOCOL = 1 # Connection refused : The Server does not support the level of the MQTT protocol requested by the Client
MQTT_CONNACK_IDENTIFIER_REJECTED   = 2 # Connection refused : The Client identifier is correct UTF-8 but not allowed by the Server
MQTT_CONNACK_SERVER_UNAVAILABLE    = 3 # Connection refused : The Network Connection has been made but the MQTT service is unavailable
MQTT_CONNACK_BAD_USER              = 4 # Connection refused : Bad user name or password, the data in the user name or password is malformed
MQTT_CONNACK_NOT_AUTHORIZED        = 5 # Connection refused : The Client is not authorized to connect

MQTT_SUBACK_MAX_QOS0 = 0x00 # Success - Maximum QoS 0
MQTT_SUBACK_MAX_QOS1 = 0x01 # Success - Maximum QoS 1
MQTT_SUBACK_MAX_QOS2 = 0x02 # Success - Maximum QoS 2
MQTT_SUBACK_FAILURE  = 0x80 # Failure

class MqttException(Exception):
        &#34;&#34;&#34; Exception for MQTT layer &#34;&#34;&#34;
        def __init__(self, message):
                &#34;&#34;&#34; Exception constructor &#34;&#34;&#34;
                Exception.__init__(self)
                self.message = message

class MqttMessage:
        &#34;&#34;&#34; Selection class of commands received &#34;&#34;&#34;
        messages = {}
        identifier_base = [1]
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor 
                Parameters :
                        control    : type of message (MQTT_CONNECT,MQTT_CONNACK,MQTT_PUBLISH,MQTT_PUBACK,MQTT_PUBREC,MQTT_PUBREL,MQTT_PUBCOMP,MQTT_SUBSCRIBE,MQTT_SUBACK,MQTT_UNSUBSCRIBE,MQTT_UNSUBACK,MQTT_PINGREQ,MQTT_PINGRESP,MQTT_DISCONNECT)
                        qos        : quality of service (MQTT_QOS_ONCE,MQTT_QOS_LEAST_ONCE,MQTT_QOS_EXACTLY_ONCE)
                        retain     : retain message (0 or 1)
                        dup        : duplicate delivery control payload (0 or 1)
                        identifier : packet identifier (1 to 65535)&#34;&#34;&#34;
                if kwargs.get(&#34;header&#34;,None) is None:
                        self.control    = kwargs.get(&#34;control&#34;   ,MQTT_UNDEFINED)
                        self.qos        = kwargs.get(&#34;qos&#34;       ,MQTT_QOS_ONCE)
                        self.dup        = kwargs.get(&#34;dup&#34;       ,0)
                        self.retain     = kwargs.get(&#34;retain&#34;    ,0)
                        self.identifier = kwargs.get(&#34;identifier&#34;,None)
                        if self.identifier is None:
                                self.identifier = MqttMessage.identifier_base[0]
                                MqttMessage.identifier_base[0] += 1
                        self.header = None
                        self.sent_time = 0
                else:
                        self.decode_header(kwargs.get(&#34;header&#34;))
                self.payload = io.BytesIO()
                self.buffer = io.BytesIO()

        @staticmethod
        def init():
                &#34;&#34;&#34; Initialize the message selector &#34;&#34;&#34;
                if len(MqttMessage.messages) == 0:
                        MqttMessage.messages = {\
                                MQTT_CONNECT     : MqttConnect,
                                MQTT_CONNACK     : MqttConnAck,
                                MQTT_PUBLISH     : MqttPublish,
                                MQTT_PUBACK      : MqttPubAck,
                                MQTT_PUBREC      : MqttPubRec,
                                MQTT_PUBREL      : MqttPubRel,
                                MQTT_PUBCOMP     : MqttPubComp,
                                MQTT_SUBSCRIBE   : MqttSubscribe,
                                MQTT_SUBACK      : MqttSubAck,
                                MQTT_UNSUBSCRIBE : MqttUnsubscribe,
                                MQTT_UNSUBACK    : MqttUnSubAck,
                                MQTT_PINGREQ     : MqttPingReq,
                                MQTT_PINGRESP    : MqttPingResp,
                                MQTT_DISCONNECT  : MqttDisconnect,}

        @staticmethod
        async def receive(streamio):
                &#34;&#34;&#34; Wait message and return the message decoded &#34;&#34;&#34;
                MqttMessage.init()
                header = await streamio.read(1)
                if len(header) &gt; 0:
                        control = header[0] &gt;&gt; 4
                        # If message is recognized
                        if control in MqttMessage.messages:
                                # Create the right message
                                result = MqttMessage.messages[control](header=header)
                                await result.read(streamio)
                                return result
                return None

        def decode_header(self, data):
                &#34;&#34;&#34; Decode header &#34;&#34;&#34;
                self.header = data
                self.control = (data[0] &gt;&gt; 4)
                self.qos     = (data[0] &gt;&gt; 1) &amp; 3
                self.dup     = (data[0] &gt;&gt; 3) &amp; 1
                self.retain  = (data[0] &amp; 1)

        def encode_header(self):
                &#34;&#34;&#34; Encode header &#34;&#34;&#34;
                if self.control in [MQTT_CONNECT , MQTT_CONNACK, MQTT_PUBACK,
                        MQTT_PUBREC , MQTT_PUBCOMP , MQTT_SUBACK,  MQTT_UNSUBACK,
                        MQTT_PINGREQ, MQTT_PINGRESP, MQTT_DISCONNECT]:
                        return (self.control &lt;&lt; 4).to_bytes(1, &#34;big&#34;)
                elif self.control in [MQTT_SUBSCRIBE, MQTT_UNSUBSCRIBE, MQTT_PUBREL]:
                        return ((self.control &lt;&lt; 4) | 2).to_bytes(1, &#34;big&#34;)
                elif self.control in [MQTT_PUBLISH]:
                        return ((self.control  &lt;&lt; 4) | ((self.dup &amp; 1) &lt;&lt; 3) | ((self.qos &amp; 3) &lt;&lt; 1) | ((self.retain &amp; 1))).to_bytes(1, &#34;big&#34;)
                else:
                        raise MqttException(&#34;Mqtt control command not supported&#34;)

        def encode_length(self, length):
                &#34;&#34;&#34; Encode the length &#34;&#34;&#34;
                result = b&#34;&#34;
                x = length
                while True:
                        encoded_byte = x % 128
                        x = x &gt;&gt; 7
                        if x &gt; 0:
                                encoded_byte |= 0x80
                        result += encoded_byte.to_bytes(1, &#34;big&#34;)
                        if x &lt;= 0:
                                break
                return result

        async def write_length(self, streamio):
                &#34;&#34;&#34; Write the length of message &#34;&#34;&#34;
                length = len(self.payload.getvalue())
                x = length
                while True:
                        encoded_byte = x % 128
                        x = x &gt;&gt; 7
                        if x &gt; 0:
                                encoded_byte |= 0x80
                        await streamio.write(encoded_byte.to_bytes(1, &#34;big&#34;))
                        if x &lt;= 0:
                                break
                return length

        async def read_length(self, streamio):
                &#34;&#34;&#34; Read the length &#34;&#34;&#34;
                multiplier = 1
                length = 0
                while True:
                        encoded_byte = await streamio.read(1)
                        length += (encoded_byte[0] &amp; 0x7F) * multiplier
                        multiplier *= 128
                        if multiplier &gt; 128*128*128:
                                raise MqttException(&#34;Mqtt malformed remaining length&#34;)
                        if encoded_byte[0] &amp; 0x80 == 0:
                                break
                return length

        async def write(self, streamio):
                &#34;&#34;&#34; Write message &#34;&#34;&#34;
                self.sent_time = tools.strings.ticks()
                self.buffer.write(self.encode_header())
                self.encode()
                self.buffer.write(self.encode_length(len(self.payload.getvalue())))
                if await streamio.write(self.buffer.getvalue()) &gt; 0:
                        await streamio.write(self.payload.getvalue())

        async def read(self, streamio):
                &#34;&#34;&#34; Read message &#34;&#34;&#34;
                if self.header is None:
                        self.decode_header(await streamio.read(1))
                length = await self.read_length(streamio)
                if length &gt; 0:
                        self.payload = io.BytesIO(await streamio.read(length))
                self.decode()

        def put_string(self, data):
                &#34;&#34;&#34; Put the string with its length &#34;&#34;&#34;
                if data is not None:
                        if type(data) == type(0):
                                data = &#34;%d&#34;%data
                        self.put_int(len(data))
                        self.payload.write(tools.strings.tobytes(data))

        def put_int(self, value):
                &#34;&#34;&#34; Put integer on 2 bytes &#34;&#34;&#34;
                self.payload.write(value.to_bytes(2, &#34;big&#34;))

        def put_byte(self, value):
                &#34;&#34;&#34; Put byte integer &#34;&#34;&#34;
                self.payload.write(value.to_bytes(1, &#34;big&#34;))

        def put_buffer(self, value):
                &#34;&#34;&#34; Put binary buffer &#34;&#34;&#34;
                self.payload.write(tools.strings.tobytes(value))

        def get_string(self):
                &#34;&#34;&#34; Get the string with its length &#34;&#34;&#34;
                return tools.strings.tostrings(self.payload.read(self.get_int()))

        def get_int(self):
                &#34;&#34;&#34; Get integer on 2 bytes &#34;&#34;&#34;
                return int.from_bytes(self.payload.read(2), &#34;big&#34;)

        def get_byte(self):
                &#34;&#34;&#34; Put byte integer &#34;&#34;&#34;
                return int.from_bytes(self.payload.read(1), &#34;big&#34;)

        def decode(self):
                &#34;&#34;&#34; Decode message (must redefined)&#34;&#34;&#34;

        def encode(self):
                &#34;&#34;&#34; Encode message (must redefined)&#34;&#34;&#34;

class MqttConnect(MqttMessage):
        &#34;&#34;&#34; Client to Server : Client request to connect to Server &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor 
                Parameters :
                        username      : user name (string)
                        password      : password (string)
                        will_retain   : this bit specifies if the Will Message is to be Retained when it is published (0 or 1)
                        will_qos      : These two bits specify the QoS level to be used when publishing the Will Message (0 or 1)
                        will_flag     : will flag see mqtt specification (0 or 1)
                        clean_session : this bit specifies the handling of the Session state (0 or 1)
                        keep_alive    : the keep alive is a time interval measured in seconds (int)
                        client_id     : the client identifier identifies the client to the server (string)
                &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_CONNECT, **kwargs)
                self.protocol_name  = &#34;MQTT&#34;
                self.protocol_level = 4 # MQTT 3.1.1
                self.username       = kwargs.get(&#34;username&#34;,     None)
                self.password       = kwargs.get(&#34;password&#34;,     None)
                self.will_retain    = kwargs.get(&#34;will_retain&#34;,  False)
                self.will_qos       = kwargs.get(&#34;qos&#34;,          MQTT_QOS_ONCE)
                self.will_flag      = kwargs.get(&#34;will_flag&#34;,    False)
                self.clean_session  = kwargs.get(&#34;clean_session&#34;,False)
                self.keep_alive     = kwargs.get(&#34;keep_alive&#34;,   60)
                self.client_id      = kwargs.get(&#34;client_id&#34;,    wifi.hostname.Hostname().get_hostname())

        def encode(self):
                &#34;&#34;&#34; Encode the full message &#34;&#34;&#34;
                self.put_string (self.protocol_name)
                self.put_byte   (self.protocol_level)
                self.put_byte   (self.get_flags())
                self.put_int    (self.keep_alive)
                self.put_string (self.client_id)
                self.put_string (self.username)
                self.put_string (self.password)

        def get_flags(self):
                &#34;&#34;&#34; Encode flags &#34;&#34;&#34;
                # pylint:disable=multiple-statements
                result = 0
                if self.username is not None:      result |= 0x80
                if self.password is not None:      result |= 0x40
                if self.will_retain:   result |= 0x20
                if self.will_qos:      result |= ((self.will_qos &lt;&lt; 3) &amp; 0x18)
                if self.will_flag:     result |= 4
                if self.clean_session: result |= 2
                return result

        def decode(self):
                &#34;&#34;&#34; Read content &#34;&#34;&#34;
                self.protocol_name  = self.get_string()
                self.protocol_level = self.get_byte()
                flags = self.get_byte()
                self.will_flag     = (flags &amp; 0x04) &gt;&gt; 2
                self.will_qos      = (flags &amp; 0x18) &gt;&gt; 3
                self.will_retain   = (flags &amp; 0x20) &gt;&gt; 5
                self.clean_session = (flags &amp; 0x01)
                self.keep_alive    = self.get_int()
                self.client_id     = self.get_string()
                if flags &amp; 0x80:
                        self.username  = self.get_string()
                if flags &amp; 0x40:
                        self.password  = self.get_string()

class MqttConnAck(MqttMessage):
        &#34;&#34;&#34; Server to Client : Connect acknowledgment &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor 
                Parameters :
                        return_code : return code (MQTT_CONNACK_ACCEPTED,MQTT_CONNACK_UNACCEPTABLE_PROTOCOL,MQTT_CONNACK_IDENTIFIER_REJECTED,MQTT_CONNACK_SERVER_UNAVAILABLE,MQTT_CONNACK_BAD_USER,MQTT_CONNACK_NOT_AUTHORIZED)
                        session_present_flag :  session present flag (0 or 1)
                &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_CONNACK, **kwargs)
                self.return_code          = kwargs.get(&#34;return_code&#34;,MQTT_CONNACK_ACCEPTED)
                self.session_present_flag = kwargs.get(&#34;session_present_flag&#34;,0)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.session_present_flag = self.get_byte() &amp; 0x01
                self.return_code          = self.get_byte()

        def encode(self):
                &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
                self.put_byte(self.session_present_flag &amp; 0x01)
                self.put_byte(self.return_code)

class MqttPingReq(MqttMessage):
        &#34;&#34;&#34; Client to Server : PING request &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PINGREQ, **kwargs)

class MqttPingResp(MqttMessage):
        &#34;&#34;&#34; Server to Client : PING response &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PINGRESP, **kwargs)

class MqttPublish(MqttMessage):
        &#34;&#34;&#34;Client to Server or Server to Client : Publish message &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor 
                Parameters : 
                        topic : topic name
                        value : topic value &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBLISH, **kwargs)
                self.topic = kwargs.get(&#34;topic&#34;,&#34;&#34;)
                self.value = kwargs.get(&#34;value&#34;,&#34;&#34;)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.topic      = self.get_string()
                if self.qos in [MQTT_QOS_LEAST_ONCE, MQTT_QOS_EXACTLY_ONCE]:
                        self.identifier = self.get_int()
                self.value    = self.payload.read()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_string(self.topic)
                if self.qos in [MQTT_QOS_LEAST_ONCE, MQTT_QOS_EXACTLY_ONCE]:
                        self.put_int(self.identifier)
                self.put_buffer(self.value)

class MqttPubAck(MqttMessage):
        &#34;&#34;&#34; Client to Server or Server to Client : Publish acknowledgment &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBACK, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)

class MqttPubRec(MqttMessage):
        &#34;&#34;&#34; Client to Server or Server to Client : Publish received (assured delivery part 1) &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBREC, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)

class MqttPubRel(MqttMessage):
        &#34;&#34;&#34; Client to Server or Server to Client : Publish release (assured delivery part 2) &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBREL, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)

class MqttPubComp(MqttMessage):
        &#34;&#34;&#34; Client to Server or Server to Client : Publish complete (assured delivery part 3) &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBCOMP, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)

class MqttSubscribe(MqttMessage):
        &#34;&#34;&#34; Client to Server : Client subscribe request &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_SUBSCRIBE, **kwargs)
                self.topics = kwargs.get(&#34;topics&#34;,[])
                topic = kwargs.get(&#34;topic&#34;, None)
                qos   = kwargs.get(&#34;qos&#34;, MQTT_QOS_ONCE)
                if topic:
                        self.topics.append((topic, qos))

        def add_topic(self, topic, qos=MQTT_QOS_ONCE):
                &#34;&#34;&#34; Add topics into subscribe &#34;&#34;&#34;
                self.topics.append((topic, qos))

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()
                self.topics = []
                while self.payload.tell() &lt; len(self.payload.getvalue()):
                        topic = self.get_string()
                        qos = self.get_byte()
                        self.add_topic(topic, qos)

        def encode(self):
                &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
                self.put_int(self.identifier)
                for topic,qos in self.topics:
                        self.put_string(topic)
                        self.put_byte(qos)

class MqttSubAck(MqttMessage):
        &#34;&#34;&#34; Server to Client : Subscribe acknowledgment &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_SUBACK, **kwargs)
                self.return_code = kwargs.get(&#34;return_code&#34;,[])

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()
                self.return_code = []
                while self.payload.tell() &lt; len(self.payload.getvalue()):
                        self.return_code.append(self.get_byte())

        def encode(self):
                &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
                self.put_int(self.identifier)
                for return_code in self.return_code:
                        self.put_byte(return_code)

class MqttUnsubscribe(MqttMessage):
        &#34;&#34;&#34; Client to Server : Unsubscribe request &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_UNSUBSCRIBE, **kwargs)
                self.topics = kwargs.get(&#34;topics&#34;,[])
                topic = kwargs.get(&#34;topic&#34;, None)
                if topic:
                        self.topics.append(topic)

        def add_topic(self, topic):
                &#34;&#34;&#34; Add topics into subscribe &#34;&#34;&#34;
                self.topics.append(topic)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()
                self.topics = []
                while self.payload.tell() &lt; len(self.payload.getvalue()):
                        topic = self.get_string()
                        self.add_topic(topic)

        def encode(self):
                &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
                self.put_int(self.identifier)
                for topic in self.topics:
                        self.put_string(topic)

class MqttUnSubAck(MqttMessage):
        &#34;&#34;&#34; Server to Client : Unsubscribe acknowledgment &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_UNSUBACK, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)

class MqttDisconnect(MqttMessage):
        &#34;&#34;&#34; Client to Server : Client is disconnecting &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_DISCONNECT, **kwargs)

class MqttStream(server.stream.Stream):
        &#34;&#34;&#34; Read and write stream for mqtt &#34;&#34;&#34;
        def __init__(self, reader, writer, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                server.stream.Stream.__init__(self, reader, writer)
                self.dump_activated = kwargs.get(&#34;dump&#34;,False)

        async def read(self, length):
                &#34;&#34;&#34; Read data from the stream &#34;&#34;&#34;
                result = await server.stream.Stream.read(self, length)
                if self.dump_activated:
                        if len(result) &gt; 0:
                                print(&#34;  Read :&#34;)
                                self.dump(result)
                return result

        async def write(self, data):
                &#34;&#34;&#34; Write data in the stream &#34;&#34;&#34;
                if self.dump_activated:
                        if len(data) &gt; 0:
                                print(&#34;  Write :&#34;)
                                self.dump(data)
                return await server.stream.Stream.write(self, data)

        def dump(self, data):
                &#34;&#34;&#34; Dump data &#34;&#34;&#34;
                width = 16
                offset = 0
                file = io.BytesIO()
                while True:
                        line = io.BytesIO()
                        line.write(b&#39;    %08X  &#39; % offset)
                        tools.strings.dump_line(data[offset:offset+width], line, width)
                        offset += width
                        print(tools.strings.tostrings(line.getvalue()))
                        if offset &gt;= 512:
                                break
                        if offset &gt;= len(data):
                                break</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="lib.server.mqttmessages.MqttConnAck"><code class="flex name class">
<span>class <span class="ident">MqttConnAck</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Server to Client : Connect acknowledgment </p>
<p>Constructor
Parameters :
return_code : return code (MQTT_CONNACK_ACCEPTED,MQTT_CONNACK_UNACCEPTABLE_PROTOCOL,MQTT_CONNACK_IDENTIFIER_REJECTED,MQTT_CONNACK_SERVER_UNAVAILABLE,MQTT_CONNACK_BAD_USER,MQTT_CONNACK_NOT_AUTHORIZED)
session_present_flag :
session present flag (0 or 1)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttConnAck(MqttMessage):
        &#34;&#34;&#34; Server to Client : Connect acknowledgment &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor 
                Parameters :
                        return_code : return code (MQTT_CONNACK_ACCEPTED,MQTT_CONNACK_UNACCEPTABLE_PROTOCOL,MQTT_CONNACK_IDENTIFIER_REJECTED,MQTT_CONNACK_SERVER_UNAVAILABLE,MQTT_CONNACK_BAD_USER,MQTT_CONNACK_NOT_AUTHORIZED)
                        session_present_flag :  session present flag (0 or 1)
                &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_CONNACK, **kwargs)
                self.return_code          = kwargs.get(&#34;return_code&#34;,MQTT_CONNACK_ACCEPTED)
                self.session_present_flag = kwargs.get(&#34;session_present_flag&#34;,0)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.session_present_flag = self.get_byte() &amp; 0x01
                self.return_code          = self.get_byte()

        def encode(self):
                &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
                self.put_byte(self.session_present_flag &amp; 0x01)
                self.put_byte(self.return_code)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttConnAck.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.session_present_flag = self.get_byte() &amp; 0x01
        self.return_code          = self.get_byte()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttConnAck.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
        self.put_byte(self.session_present_flag &amp; 0x01)
        self.put_byte(self.return_code)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttConnect"><code class="flex name class">
<span>class <span class="ident">MqttConnect</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server : Client request to connect to Server </p>
<p>Constructor
Parameters :
username
: user name (string)
password
: password (string)
will_retain
: this bit specifies if the Will Message is to be Retained when it is published (0 or 1)
will_qos
: These two bits specify the QoS level to be used when publishing the Will Message (0 or 1)
will_flag
: will flag see mqtt specification (0 or 1)
clean_session : this bit specifies the handling of the Session state (0 or 1)
keep_alive
: the keep alive is a time interval measured in seconds (int)
client_id
: the client identifier identifies the client to the server (string)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttConnect(MqttMessage):
        &#34;&#34;&#34; Client to Server : Client request to connect to Server &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor 
                Parameters :
                        username      : user name (string)
                        password      : password (string)
                        will_retain   : this bit specifies if the Will Message is to be Retained when it is published (0 or 1)
                        will_qos      : These two bits specify the QoS level to be used when publishing the Will Message (0 or 1)
                        will_flag     : will flag see mqtt specification (0 or 1)
                        clean_session : this bit specifies the handling of the Session state (0 or 1)
                        keep_alive    : the keep alive is a time interval measured in seconds (int)
                        client_id     : the client identifier identifies the client to the server (string)
                &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_CONNECT, **kwargs)
                self.protocol_name  = &#34;MQTT&#34;
                self.protocol_level = 4 # MQTT 3.1.1
                self.username       = kwargs.get(&#34;username&#34;,     None)
                self.password       = kwargs.get(&#34;password&#34;,     None)
                self.will_retain    = kwargs.get(&#34;will_retain&#34;,  False)
                self.will_qos       = kwargs.get(&#34;qos&#34;,          MQTT_QOS_ONCE)
                self.will_flag      = kwargs.get(&#34;will_flag&#34;,    False)
                self.clean_session  = kwargs.get(&#34;clean_session&#34;,False)
                self.keep_alive     = kwargs.get(&#34;keep_alive&#34;,   60)
                self.client_id      = kwargs.get(&#34;client_id&#34;,    wifi.hostname.Hostname().get_hostname())

        def encode(self):
                &#34;&#34;&#34; Encode the full message &#34;&#34;&#34;
                self.put_string (self.protocol_name)
                self.put_byte   (self.protocol_level)
                self.put_byte   (self.get_flags())
                self.put_int    (self.keep_alive)
                self.put_string (self.client_id)
                self.put_string (self.username)
                self.put_string (self.password)

        def get_flags(self):
                &#34;&#34;&#34; Encode flags &#34;&#34;&#34;
                # pylint:disable=multiple-statements
                result = 0
                if self.username is not None:      result |= 0x80
                if self.password is not None:      result |= 0x40
                if self.will_retain:   result |= 0x20
                if self.will_qos:      result |= ((self.will_qos &lt;&lt; 3) &amp; 0x18)
                if self.will_flag:     result |= 4
                if self.clean_session: result |= 2
                return result

        def decode(self):
                &#34;&#34;&#34; Read content &#34;&#34;&#34;
                self.protocol_name  = self.get_string()
                self.protocol_level = self.get_byte()
                flags = self.get_byte()
                self.will_flag     = (flags &amp; 0x04) &gt;&gt; 2
                self.will_qos      = (flags &amp; 0x18) &gt;&gt; 3
                self.will_retain   = (flags &amp; 0x20) &gt;&gt; 5
                self.clean_session = (flags &amp; 0x01)
                self.keep_alive    = self.get_int()
                self.client_id     = self.get_string()
                if flags &amp; 0x80:
                        self.username  = self.get_string()
                if flags &amp; 0x40:
                        self.password  = self.get_string()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttConnect.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Read content</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Read content &#34;&#34;&#34;
        self.protocol_name  = self.get_string()
        self.protocol_level = self.get_byte()
        flags = self.get_byte()
        self.will_flag     = (flags &amp; 0x04) &gt;&gt; 2
        self.will_qos      = (flags &amp; 0x18) &gt;&gt; 3
        self.will_retain   = (flags &amp; 0x20) &gt;&gt; 5
        self.clean_session = (flags &amp; 0x01)
        self.keep_alive    = self.get_int()
        self.client_id     = self.get_string()
        if flags &amp; 0x80:
                self.username  = self.get_string()
        if flags &amp; 0x40:
                self.password  = self.get_string()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttConnect.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode the full message</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode the full message &#34;&#34;&#34;
        self.put_string (self.protocol_name)
        self.put_byte   (self.protocol_level)
        self.put_byte   (self.get_flags())
        self.put_int    (self.keep_alive)
        self.put_string (self.client_id)
        self.put_string (self.username)
        self.put_string (self.password)</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttConnect.get_flags"><code class="name flex">
<span>def <span class="ident">get_flags</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode flags</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_flags(self):
        &#34;&#34;&#34; Encode flags &#34;&#34;&#34;
        # pylint:disable=multiple-statements
        result = 0
        if self.username is not None:      result |= 0x80
        if self.password is not None:      result |= 0x40
        if self.will_retain:   result |= 0x20
        if self.will_qos:      result |= ((self.will_qos &lt;&lt; 3) &amp; 0x18)
        if self.will_flag:     result |= 4
        if self.clean_session: result |= 2
        return result</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttDisconnect"><code class="flex name class">
<span>class <span class="ident">MqttDisconnect</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server : Client is disconnecting </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttDisconnect(MqttMessage):
        &#34;&#34;&#34; Client to Server : Client is disconnecting &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_DISCONNECT, **kwargs)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode" href="#lib.server.mqttmessages.MqttMessage.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode" href="#lib.server.mqttmessages.MqttMessage.encode">encode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttException"><code class="flex name class">
<span>class <span class="ident">MqttException</span></span>
<span>(</span><span>message)</span>
</code></dt>
<dd>
<div class="desc"><p>Exception for MQTT layer </p>
<p>Exception constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttException(Exception):
        &#34;&#34;&#34; Exception for MQTT layer &#34;&#34;&#34;
        def __init__(self, message):
                &#34;&#34;&#34; Exception constructor &#34;&#34;&#34;
                Exception.__init__(self)
                self.message = message</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage"><code class="flex name class">
<span>class <span class="ident">MqttMessage</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Selection class of commands received </p>
<p>Constructor
Parameters :
control
: type of message (MQTT_CONNECT,MQTT_CONNACK,MQTT_PUBLISH,MQTT_PUBACK,MQTT_PUBREC,MQTT_PUBREL,MQTT_PUBCOMP,MQTT_SUBSCRIBE,MQTT_SUBACK,MQTT_UNSUBSCRIBE,MQTT_UNSUBACK,MQTT_PINGREQ,MQTT_PINGRESP,MQTT_DISCONNECT)
qos
: quality of service (MQTT_QOS_ONCE,MQTT_QOS_LEAST_ONCE,MQTT_QOS_EXACTLY_ONCE)
retain
: retain message (0 or 1)
dup
: duplicate delivery control payload (0 or 1)
identifier : packet identifier (1 to 65535)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttMessage:
        &#34;&#34;&#34; Selection class of commands received &#34;&#34;&#34;
        messages = {}
        identifier_base = [1]
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor 
                Parameters :
                        control    : type of message (MQTT_CONNECT,MQTT_CONNACK,MQTT_PUBLISH,MQTT_PUBACK,MQTT_PUBREC,MQTT_PUBREL,MQTT_PUBCOMP,MQTT_SUBSCRIBE,MQTT_SUBACK,MQTT_UNSUBSCRIBE,MQTT_UNSUBACK,MQTT_PINGREQ,MQTT_PINGRESP,MQTT_DISCONNECT)
                        qos        : quality of service (MQTT_QOS_ONCE,MQTT_QOS_LEAST_ONCE,MQTT_QOS_EXACTLY_ONCE)
                        retain     : retain message (0 or 1)
                        dup        : duplicate delivery control payload (0 or 1)
                        identifier : packet identifier (1 to 65535)&#34;&#34;&#34;
                if kwargs.get(&#34;header&#34;,None) is None:
                        self.control    = kwargs.get(&#34;control&#34;   ,MQTT_UNDEFINED)
                        self.qos        = kwargs.get(&#34;qos&#34;       ,MQTT_QOS_ONCE)
                        self.dup        = kwargs.get(&#34;dup&#34;       ,0)
                        self.retain     = kwargs.get(&#34;retain&#34;    ,0)
                        self.identifier = kwargs.get(&#34;identifier&#34;,None)
                        if self.identifier is None:
                                self.identifier = MqttMessage.identifier_base[0]
                                MqttMessage.identifier_base[0] += 1
                        self.header = None
                        self.sent_time = 0
                else:
                        self.decode_header(kwargs.get(&#34;header&#34;))
                self.payload = io.BytesIO()
                self.buffer = io.BytesIO()

        @staticmethod
        def init():
                &#34;&#34;&#34; Initialize the message selector &#34;&#34;&#34;
                if len(MqttMessage.messages) == 0:
                        MqttMessage.messages = {\
                                MQTT_CONNECT     : MqttConnect,
                                MQTT_CONNACK     : MqttConnAck,
                                MQTT_PUBLISH     : MqttPublish,
                                MQTT_PUBACK      : MqttPubAck,
                                MQTT_PUBREC      : MqttPubRec,
                                MQTT_PUBREL      : MqttPubRel,
                                MQTT_PUBCOMP     : MqttPubComp,
                                MQTT_SUBSCRIBE   : MqttSubscribe,
                                MQTT_SUBACK      : MqttSubAck,
                                MQTT_UNSUBSCRIBE : MqttUnsubscribe,
                                MQTT_UNSUBACK    : MqttUnSubAck,
                                MQTT_PINGREQ     : MqttPingReq,
                                MQTT_PINGRESP    : MqttPingResp,
                                MQTT_DISCONNECT  : MqttDisconnect,}

        @staticmethod
        async def receive(streamio):
                &#34;&#34;&#34; Wait message and return the message decoded &#34;&#34;&#34;
                MqttMessage.init()
                header = await streamio.read(1)
                if len(header) &gt; 0:
                        control = header[0] &gt;&gt; 4
                        # If message is recognized
                        if control in MqttMessage.messages:
                                # Create the right message
                                result = MqttMessage.messages[control](header=header)
                                await result.read(streamio)
                                return result
                return None

        def decode_header(self, data):
                &#34;&#34;&#34; Decode header &#34;&#34;&#34;
                self.header = data
                self.control = (data[0] &gt;&gt; 4)
                self.qos     = (data[0] &gt;&gt; 1) &amp; 3
                self.dup     = (data[0] &gt;&gt; 3) &amp; 1
                self.retain  = (data[0] &amp; 1)

        def encode_header(self):
                &#34;&#34;&#34; Encode header &#34;&#34;&#34;
                if self.control in [MQTT_CONNECT , MQTT_CONNACK, MQTT_PUBACK,
                        MQTT_PUBREC , MQTT_PUBCOMP , MQTT_SUBACK,  MQTT_UNSUBACK,
                        MQTT_PINGREQ, MQTT_PINGRESP, MQTT_DISCONNECT]:
                        return (self.control &lt;&lt; 4).to_bytes(1, &#34;big&#34;)
                elif self.control in [MQTT_SUBSCRIBE, MQTT_UNSUBSCRIBE, MQTT_PUBREL]:
                        return ((self.control &lt;&lt; 4) | 2).to_bytes(1, &#34;big&#34;)
                elif self.control in [MQTT_PUBLISH]:
                        return ((self.control  &lt;&lt; 4) | ((self.dup &amp; 1) &lt;&lt; 3) | ((self.qos &amp; 3) &lt;&lt; 1) | ((self.retain &amp; 1))).to_bytes(1, &#34;big&#34;)
                else:
                        raise MqttException(&#34;Mqtt control command not supported&#34;)

        def encode_length(self, length):
                &#34;&#34;&#34; Encode the length &#34;&#34;&#34;
                result = b&#34;&#34;
                x = length
                while True:
                        encoded_byte = x % 128
                        x = x &gt;&gt; 7
                        if x &gt; 0:
                                encoded_byte |= 0x80
                        result += encoded_byte.to_bytes(1, &#34;big&#34;)
                        if x &lt;= 0:
                                break
                return result

        async def write_length(self, streamio):
                &#34;&#34;&#34; Write the length of message &#34;&#34;&#34;
                length = len(self.payload.getvalue())
                x = length
                while True:
                        encoded_byte = x % 128
                        x = x &gt;&gt; 7
                        if x &gt; 0:
                                encoded_byte |= 0x80
                        await streamio.write(encoded_byte.to_bytes(1, &#34;big&#34;))
                        if x &lt;= 0:
                                break
                return length

        async def read_length(self, streamio):
                &#34;&#34;&#34; Read the length &#34;&#34;&#34;
                multiplier = 1
                length = 0
                while True:
                        encoded_byte = await streamio.read(1)
                        length += (encoded_byte[0] &amp; 0x7F) * multiplier
                        multiplier *= 128
                        if multiplier &gt; 128*128*128:
                                raise MqttException(&#34;Mqtt malformed remaining length&#34;)
                        if encoded_byte[0] &amp; 0x80 == 0:
                                break
                return length

        async def write(self, streamio):
                &#34;&#34;&#34; Write message &#34;&#34;&#34;
                self.sent_time = tools.strings.ticks()
                self.buffer.write(self.encode_header())
                self.encode()
                self.buffer.write(self.encode_length(len(self.payload.getvalue())))
                if await streamio.write(self.buffer.getvalue()) &gt; 0:
                        await streamio.write(self.payload.getvalue())

        async def read(self, streamio):
                &#34;&#34;&#34; Read message &#34;&#34;&#34;
                if self.header is None:
                        self.decode_header(await streamio.read(1))
                length = await self.read_length(streamio)
                if length &gt; 0:
                        self.payload = io.BytesIO(await streamio.read(length))
                self.decode()

        def put_string(self, data):
                &#34;&#34;&#34; Put the string with its length &#34;&#34;&#34;
                if data is not None:
                        if type(data) == type(0):
                                data = &#34;%d&#34;%data
                        self.put_int(len(data))
                        self.payload.write(tools.strings.tobytes(data))

        def put_int(self, value):
                &#34;&#34;&#34; Put integer on 2 bytes &#34;&#34;&#34;
                self.payload.write(value.to_bytes(2, &#34;big&#34;))

        def put_byte(self, value):
                &#34;&#34;&#34; Put byte integer &#34;&#34;&#34;
                self.payload.write(value.to_bytes(1, &#34;big&#34;))

        def put_buffer(self, value):
                &#34;&#34;&#34; Put binary buffer &#34;&#34;&#34;
                self.payload.write(tools.strings.tobytes(value))

        def get_string(self):
                &#34;&#34;&#34; Get the string with its length &#34;&#34;&#34;
                return tools.strings.tostrings(self.payload.read(self.get_int()))

        def get_int(self):
                &#34;&#34;&#34; Get integer on 2 bytes &#34;&#34;&#34;
                return int.from_bytes(self.payload.read(2), &#34;big&#34;)

        def get_byte(self):
                &#34;&#34;&#34; Put byte integer &#34;&#34;&#34;
                return int.from_bytes(self.payload.read(1), &#34;big&#34;)

        def decode(self):
                &#34;&#34;&#34; Decode message (must redefined)&#34;&#34;&#34;

        def encode(self):
                &#34;&#34;&#34; Encode message (must redefined)&#34;&#34;&#34;</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttConnAck" href="#lib.server.mqttmessages.MqttConnAck">MqttConnAck</a></li>
<li><a title="lib.server.mqttmessages.MqttConnect" href="#lib.server.mqttmessages.MqttConnect">MqttConnect</a></li>
<li><a title="lib.server.mqttmessages.MqttDisconnect" href="#lib.server.mqttmessages.MqttDisconnect">MqttDisconnect</a></li>
<li><a title="lib.server.mqttmessages.MqttPingReq" href="#lib.server.mqttmessages.MqttPingReq">MqttPingReq</a></li>
<li><a title="lib.server.mqttmessages.MqttPingResp" href="#lib.server.mqttmessages.MqttPingResp">MqttPingResp</a></li>
<li><a title="lib.server.mqttmessages.MqttPubAck" href="#lib.server.mqttmessages.MqttPubAck">MqttPubAck</a></li>
<li><a title="lib.server.mqttmessages.MqttPubComp" href="#lib.server.mqttmessages.MqttPubComp">MqttPubComp</a></li>
<li><a title="lib.server.mqttmessages.MqttPubRec" href="#lib.server.mqttmessages.MqttPubRec">MqttPubRec</a></li>
<li><a title="lib.server.mqttmessages.MqttPubRel" href="#lib.server.mqttmessages.MqttPubRel">MqttPubRel</a></li>
<li><a title="lib.server.mqttmessages.MqttPublish" href="#lib.server.mqttmessages.MqttPublish">MqttPublish</a></li>
<li><a title="lib.server.mqttmessages.MqttSubAck" href="#lib.server.mqttmessages.MqttSubAck">MqttSubAck</a></li>
<li><a title="lib.server.mqttmessages.MqttSubscribe" href="#lib.server.mqttmessages.MqttSubscribe">MqttSubscribe</a></li>
<li><a title="lib.server.mqttmessages.MqttUnSubAck" href="#lib.server.mqttmessages.MqttUnSubAck">MqttUnSubAck</a></li>
<li><a title="lib.server.mqttmessages.MqttUnsubscribe" href="#lib.server.mqttmessages.MqttUnsubscribe">MqttUnsubscribe</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttMessage.identifier_base"><code class="name">var <span class="ident">identifier_base</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.messages"><code class="name">var <span class="ident">messages</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttMessage.init"><code class="name flex">
<span>def <span class="ident">init</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Initialize the message selector</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def init():
        &#34;&#34;&#34; Initialize the message selector &#34;&#34;&#34;
        if len(MqttMessage.messages) == 0:
                MqttMessage.messages = {\
                        MQTT_CONNECT     : MqttConnect,
                        MQTT_CONNACK     : MqttConnAck,
                        MQTT_PUBLISH     : MqttPublish,
                        MQTT_PUBACK      : MqttPubAck,
                        MQTT_PUBREC      : MqttPubRec,
                        MQTT_PUBREL      : MqttPubRel,
                        MQTT_PUBCOMP     : MqttPubComp,
                        MQTT_SUBSCRIBE   : MqttSubscribe,
                        MQTT_SUBACK      : MqttSubAck,
                        MQTT_UNSUBSCRIBE : MqttUnsubscribe,
                        MQTT_UNSUBACK    : MqttUnSubAck,
                        MQTT_PINGREQ     : MqttPingReq,
                        MQTT_PINGRESP    : MqttPingResp,
                        MQTT_DISCONNECT  : MqttDisconnect,}</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.receive"><code class="name flex">
<span>async def <span class="ident">receive</span></span>(<span>streamio)</span>
</code></dt>
<dd>
<div class="desc"><p>Wait message and return the message decoded</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
async def receive(streamio):
        &#34;&#34;&#34; Wait message and return the message decoded &#34;&#34;&#34;
        MqttMessage.init()
        header = await streamio.read(1)
        if len(header) &gt; 0:
                control = header[0] &gt;&gt; 4
                # If message is recognized
                if control in MqttMessage.messages:
                        # Create the right message
                        result = MqttMessage.messages[control](header=header)
                        await result.read(streamio)
                        return result
        return None</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttMessage.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode message (must redefined)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode message (must redefined)&#34;&#34;&#34;</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.decode_header"><code class="name flex">
<span>def <span class="ident">decode_header</span></span>(<span>self, data)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode header</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode_header(self, data):
        &#34;&#34;&#34; Decode header &#34;&#34;&#34;
        self.header = data
        self.control = (data[0] &gt;&gt; 4)
        self.qos     = (data[0] &gt;&gt; 1) &amp; 3
        self.dup     = (data[0] &gt;&gt; 3) &amp; 1
        self.retain  = (data[0] &amp; 1)</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode message (must redefined)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode message (must redefined)&#34;&#34;&#34;</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.encode_header"><code class="name flex">
<span>def <span class="ident">encode_header</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode header</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode_header(self):
        &#34;&#34;&#34; Encode header &#34;&#34;&#34;
        if self.control in [MQTT_CONNECT , MQTT_CONNACK, MQTT_PUBACK,
                MQTT_PUBREC , MQTT_PUBCOMP , MQTT_SUBACK,  MQTT_UNSUBACK,
                MQTT_PINGREQ, MQTT_PINGRESP, MQTT_DISCONNECT]:
                return (self.control &lt;&lt; 4).to_bytes(1, &#34;big&#34;)
        elif self.control in [MQTT_SUBSCRIBE, MQTT_UNSUBSCRIBE, MQTT_PUBREL]:
                return ((self.control &lt;&lt; 4) | 2).to_bytes(1, &#34;big&#34;)
        elif self.control in [MQTT_PUBLISH]:
                return ((self.control  &lt;&lt; 4) | ((self.dup &amp; 1) &lt;&lt; 3) | ((self.qos &amp; 3) &lt;&lt; 1) | ((self.retain &amp; 1))).to_bytes(1, &#34;big&#34;)
        else:
                raise MqttException(&#34;Mqtt control command not supported&#34;)</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.encode_length"><code class="name flex">
<span>def <span class="ident">encode_length</span></span>(<span>self, length)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode the length</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode_length(self, length):
        &#34;&#34;&#34; Encode the length &#34;&#34;&#34;
        result = b&#34;&#34;
        x = length
        while True:
                encoded_byte = x % 128
                x = x &gt;&gt; 7
                if x &gt; 0:
                        encoded_byte |= 0x80
                result += encoded_byte.to_bytes(1, &#34;big&#34;)
                if x &lt;= 0:
                        break
        return result</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.get_byte"><code class="name flex">
<span>def <span class="ident">get_byte</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Put byte integer</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_byte(self):
        &#34;&#34;&#34; Put byte integer &#34;&#34;&#34;
        return int.from_bytes(self.payload.read(1), &#34;big&#34;)</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.get_int"><code class="name flex">
<span>def <span class="ident">get_int</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Get integer on 2 bytes</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_int(self):
        &#34;&#34;&#34; Get integer on 2 bytes &#34;&#34;&#34;
        return int.from_bytes(self.payload.read(2), &#34;big&#34;)</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.get_string"><code class="name flex">
<span>def <span class="ident">get_string</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the string with its length</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_string(self):
        &#34;&#34;&#34; Get the string with its length &#34;&#34;&#34;
        return tools.strings.tostrings(self.payload.read(self.get_int()))</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.put_buffer"><code class="name flex">
<span>def <span class="ident">put_buffer</span></span>(<span>self, value)</span>
</code></dt>
<dd>
<div class="desc"><p>Put binary buffer</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_buffer(self, value):
        &#34;&#34;&#34; Put binary buffer &#34;&#34;&#34;
        self.payload.write(tools.strings.tobytes(value))</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.put_byte"><code class="name flex">
<span>def <span class="ident">put_byte</span></span>(<span>self, value)</span>
</code></dt>
<dd>
<div class="desc"><p>Put byte integer</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_byte(self, value):
        &#34;&#34;&#34; Put byte integer &#34;&#34;&#34;
        self.payload.write(value.to_bytes(1, &#34;big&#34;))</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.put_int"><code class="name flex">
<span>def <span class="ident">put_int</span></span>(<span>self, value)</span>
</code></dt>
<dd>
<div class="desc"><p>Put integer on 2 bytes</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_int(self, value):
        &#34;&#34;&#34; Put integer on 2 bytes &#34;&#34;&#34;
        self.payload.write(value.to_bytes(2, &#34;big&#34;))</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.put_string"><code class="name flex">
<span>def <span class="ident">put_string</span></span>(<span>self, data)</span>
</code></dt>
<dd>
<div class="desc"><p>Put the string with its length</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_string(self, data):
        &#34;&#34;&#34; Put the string with its length &#34;&#34;&#34;
        if data is not None:
                if type(data) == type(0):
                        data = &#34;%d&#34;%data
                self.put_int(len(data))
                self.payload.write(tools.strings.tobytes(data))</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.read"><code class="name flex">
<span>async def <span class="ident">read</span></span>(<span>self, streamio)</span>
</code></dt>
<dd>
<div class="desc"><p>Read message</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def read(self, streamio):
        &#34;&#34;&#34; Read message &#34;&#34;&#34;
        if self.header is None:
                self.decode_header(await streamio.read(1))
        length = await self.read_length(streamio)
        if length &gt; 0:
                self.payload = io.BytesIO(await streamio.read(length))
        self.decode()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.read_length"><code class="name flex">
<span>async def <span class="ident">read_length</span></span>(<span>self, streamio)</span>
</code></dt>
<dd>
<div class="desc"><p>Read the length</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def read_length(self, streamio):
        &#34;&#34;&#34; Read the length &#34;&#34;&#34;
        multiplier = 1
        length = 0
        while True:
                encoded_byte = await streamio.read(1)
                length += (encoded_byte[0] &amp; 0x7F) * multiplier
                multiplier *= 128
                if multiplier &gt; 128*128*128:
                        raise MqttException(&#34;Mqtt malformed remaining length&#34;)
                if encoded_byte[0] &amp; 0x80 == 0:
                        break
        return length</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.write"><code class="name flex">
<span>async def <span class="ident">write</span></span>(<span>self, streamio)</span>
</code></dt>
<dd>
<div class="desc"><p>Write message</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def write(self, streamio):
        &#34;&#34;&#34; Write message &#34;&#34;&#34;
        self.sent_time = tools.strings.ticks()
        self.buffer.write(self.encode_header())
        self.encode()
        self.buffer.write(self.encode_length(len(self.payload.getvalue())))
        if await streamio.write(self.buffer.getvalue()) &gt; 0:
                await streamio.write(self.payload.getvalue())</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttMessage.write_length"><code class="name flex">
<span>async def <span class="ident">write_length</span></span>(<span>self, streamio)</span>
</code></dt>
<dd>
<div class="desc"><p>Write the length of message</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def write_length(self, streamio):
        &#34;&#34;&#34; Write the length of message &#34;&#34;&#34;
        length = len(self.payload.getvalue())
        x = length
        while True:
                encoded_byte = x % 128
                x = x &gt;&gt; 7
                if x &gt; 0:
                        encoded_byte |= 0x80
                await streamio.write(encoded_byte.to_bytes(1, &#34;big&#34;))
                if x &lt;= 0:
                        break
        return length</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="lib.server.mqttmessages.MqttPingReq"><code class="flex name class">
<span>class <span class="ident">MqttPingReq</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server : PING request </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttPingReq(MqttMessage):
        &#34;&#34;&#34; Client to Server : PING request &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PINGREQ, **kwargs)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode" href="#lib.server.mqttmessages.MqttMessage.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode" href="#lib.server.mqttmessages.MqttMessage.encode">encode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttPingResp"><code class="flex name class">
<span>class <span class="ident">MqttPingResp</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Server to Client : PING response </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttPingResp(MqttMessage):
        &#34;&#34;&#34; Server to Client : PING response &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PINGRESP, **kwargs)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode" href="#lib.server.mqttmessages.MqttMessage.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode" href="#lib.server.mqttmessages.MqttMessage.encode">encode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttPubAck"><code class="flex name class">
<span>class <span class="ident">MqttPubAck</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server or Server to Client : Publish acknowledgment </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttPubAck(MqttMessage):
        &#34;&#34;&#34; Client to Server or Server to Client : Publish acknowledgment &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBACK, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttPubAck.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.identifier = self.get_int()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttPubAck.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode the payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
        self.put_int(self.identifier)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttPubComp"><code class="flex name class">
<span>class <span class="ident">MqttPubComp</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server or Server to Client : Publish complete (assured delivery part 3) </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttPubComp(MqttMessage):
        &#34;&#34;&#34; Client to Server or Server to Client : Publish complete (assured delivery part 3) &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBCOMP, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttPubComp.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.identifier = self.get_int()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttPubComp.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode the payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
        self.put_int(self.identifier)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttPubRec"><code class="flex name class">
<span>class <span class="ident">MqttPubRec</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server or Server to Client : Publish received (assured delivery part 1) </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttPubRec(MqttMessage):
        &#34;&#34;&#34; Client to Server or Server to Client : Publish received (assured delivery part 1) &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBREC, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttPubRec.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.identifier = self.get_int()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttPubRec.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode the payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
        self.put_int(self.identifier)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttPubRel"><code class="flex name class">
<span>class <span class="ident">MqttPubRel</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server or Server to Client : Publish release (assured delivery part 2) </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttPubRel(MqttMessage):
        &#34;&#34;&#34; Client to Server or Server to Client : Publish release (assured delivery part 2) &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBREL, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttPubRel.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.identifier = self.get_int()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttPubRel.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode the payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
        self.put_int(self.identifier)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttPublish"><code class="flex name class">
<span>class <span class="ident">MqttPublish</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server or Server to Client : Publish message </p>
<p>Constructor
Parameters :
topic : topic name
value : topic value</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttPublish(MqttMessage):
        &#34;&#34;&#34;Client to Server or Server to Client : Publish message &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor 
                Parameters : 
                        topic : topic name
                        value : topic value &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_PUBLISH, **kwargs)
                self.topic = kwargs.get(&#34;topic&#34;,&#34;&#34;)
                self.value = kwargs.get(&#34;value&#34;,&#34;&#34;)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.topic      = self.get_string()
                if self.qos in [MQTT_QOS_LEAST_ONCE, MQTT_QOS_EXACTLY_ONCE]:
                        self.identifier = self.get_int()
                self.value    = self.payload.read()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_string(self.topic)
                if self.qos in [MQTT_QOS_LEAST_ONCE, MQTT_QOS_EXACTLY_ONCE]:
                        self.put_int(self.identifier)
                self.put_buffer(self.value)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttPublish.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.topic      = self.get_string()
        if self.qos in [MQTT_QOS_LEAST_ONCE, MQTT_QOS_EXACTLY_ONCE]:
                self.identifier = self.get_int()
        self.value    = self.payload.read()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttPublish.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode the payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
        self.put_string(self.topic)
        if self.qos in [MQTT_QOS_LEAST_ONCE, MQTT_QOS_EXACTLY_ONCE]:
                self.put_int(self.identifier)
        self.put_buffer(self.value)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttStream"><code class="flex name class">
<span>class <span class="ident">MqttStream</span></span>
<span>(</span><span>reader, writer, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Read and write stream for mqtt </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttStream(server.stream.Stream):
        &#34;&#34;&#34; Read and write stream for mqtt &#34;&#34;&#34;
        def __init__(self, reader, writer, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                server.stream.Stream.__init__(self, reader, writer)
                self.dump_activated = kwargs.get(&#34;dump&#34;,False)

        async def read(self, length):
                &#34;&#34;&#34; Read data from the stream &#34;&#34;&#34;
                result = await server.stream.Stream.read(self, length)
                if self.dump_activated:
                        if len(result) &gt; 0:
                                print(&#34;  Read :&#34;)
                                self.dump(result)
                return result

        async def write(self, data):
                &#34;&#34;&#34; Write data in the stream &#34;&#34;&#34;
                if self.dump_activated:
                        if len(data) &gt; 0:
                                print(&#34;  Write :&#34;)
                                self.dump(data)
                return await server.stream.Stream.write(self, data)

        def dump(self, data):
                &#34;&#34;&#34; Dump data &#34;&#34;&#34;
                width = 16
                offset = 0
                file = io.BytesIO()
                while True:
                        line = io.BytesIO()
                        line.write(b&#39;    %08X  &#39; % offset)
                        tools.strings.dump_line(data[offset:offset+width], line, width)
                        offset += width
                        print(tools.strings.tostrings(line.getvalue()))
                        if offset &gt;= 512:
                                break
                        if offset &gt;= len(data):
                                break</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>server.stream.Stream</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttStream.dump"><code class="name flex">
<span>def <span class="ident">dump</span></span>(<span>self, data)</span>
</code></dt>
<dd>
<div class="desc"><p>Dump data</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dump(self, data):
        &#34;&#34;&#34; Dump data &#34;&#34;&#34;
        width = 16
        offset = 0
        file = io.BytesIO()
        while True:
                line = io.BytesIO()
                line.write(b&#39;    %08X  &#39; % offset)
                tools.strings.dump_line(data[offset:offset+width], line, width)
                offset += width
                print(tools.strings.tostrings(line.getvalue()))
                if offset &gt;= 512:
                        break
                if offset &gt;= len(data):
                        break</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttStream.read"><code class="name flex">
<span>async def <span class="ident">read</span></span>(<span>self, length)</span>
</code></dt>
<dd>
<div class="desc"><p>Read data from the stream</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def read(self, length):
        &#34;&#34;&#34; Read data from the stream &#34;&#34;&#34;
        result = await server.stream.Stream.read(self, length)
        if self.dump_activated:
                if len(result) &gt; 0:
                        print(&#34;  Read :&#34;)
                        self.dump(result)
        return result</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttStream.write"><code class="name flex">
<span>async def <span class="ident">write</span></span>(<span>self, data)</span>
</code></dt>
<dd>
<div class="desc"><p>Write data in the stream</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def write(self, data):
        &#34;&#34;&#34; Write data in the stream &#34;&#34;&#34;
        if self.dump_activated:
                if len(data) &gt; 0:
                        print(&#34;  Write :&#34;)
                        self.dump(data)
        return await server.stream.Stream.write(self, data)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="lib.server.mqttmessages.MqttSubAck"><code class="flex name class">
<span>class <span class="ident">MqttSubAck</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Server to Client : Subscribe acknowledgment </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttSubAck(MqttMessage):
        &#34;&#34;&#34; Server to Client : Subscribe acknowledgment &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_SUBACK, **kwargs)
                self.return_code = kwargs.get(&#34;return_code&#34;,[])

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()
                self.return_code = []
                while self.payload.tell() &lt; len(self.payload.getvalue()):
                        self.return_code.append(self.get_byte())

        def encode(self):
                &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
                self.put_int(self.identifier)
                for return_code in self.return_code:
                        self.put_byte(return_code)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttSubAck.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.identifier = self.get_int()
        self.return_code = []
        while self.payload.tell() &lt; len(self.payload.getvalue()):
                self.return_code.append(self.get_byte())</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttSubAck.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
        self.put_int(self.identifier)
        for return_code in self.return_code:
                self.put_byte(return_code)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttSubscribe"><code class="flex name class">
<span>class <span class="ident">MqttSubscribe</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server : Client subscribe request </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttSubscribe(MqttMessage):
        &#34;&#34;&#34; Client to Server : Client subscribe request &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_SUBSCRIBE, **kwargs)
                self.topics = kwargs.get(&#34;topics&#34;,[])
                topic = kwargs.get(&#34;topic&#34;, None)
                qos   = kwargs.get(&#34;qos&#34;, MQTT_QOS_ONCE)
                if topic:
                        self.topics.append((topic, qos))

        def add_topic(self, topic, qos=MQTT_QOS_ONCE):
                &#34;&#34;&#34; Add topics into subscribe &#34;&#34;&#34;
                self.topics.append((topic, qos))

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()
                self.topics = []
                while self.payload.tell() &lt; len(self.payload.getvalue()):
                        topic = self.get_string()
                        qos = self.get_byte()
                        self.add_topic(topic, qos)

        def encode(self):
                &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
                self.put_int(self.identifier)
                for topic,qos in self.topics:
                        self.put_string(topic)
                        self.put_byte(qos)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttSubscribe.add_topic"><code class="name flex">
<span>def <span class="ident">add_topic</span></span>(<span>self, topic, qos=0)</span>
</code></dt>
<dd>
<div class="desc"><p>Add topics into subscribe</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_topic(self, topic, qos=MQTT_QOS_ONCE):
        &#34;&#34;&#34; Add topics into subscribe &#34;&#34;&#34;
        self.topics.append((topic, qos))</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttSubscribe.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.identifier = self.get_int()
        self.topics = []
        while self.payload.tell() &lt; len(self.payload.getvalue()):
                topic = self.get_string()
                qos = self.get_byte()
                self.add_topic(topic, qos)</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttSubscribe.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
        self.put_int(self.identifier)
        for topic,qos in self.topics:
                self.put_string(topic)
                self.put_byte(qos)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttUnSubAck"><code class="flex name class">
<span>class <span class="ident">MqttUnSubAck</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Server to Client : Unsubscribe acknowledgment </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttUnSubAck(MqttMessage):
        &#34;&#34;&#34; Server to Client : Unsubscribe acknowledgment &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_UNSUBACK, **kwargs)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()

        def encode(self):
                &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
                self.put_int(self.identifier)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttUnSubAck.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.identifier = self.get_int()</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttUnSubAck.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode the payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode the payload &#34;&#34;&#34;
        self.put_int(self.identifier)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="lib.server.mqttmessages.MqttUnsubscribe"><code class="flex name class">
<span>class <span class="ident">MqttUnsubscribe</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Client to Server : Unsubscribe request </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MqttUnsubscribe(MqttMessage):
        &#34;&#34;&#34; Client to Server : Unsubscribe request &#34;&#34;&#34;
        def __init__(self, **kwargs):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                MqttMessage.__init__(self, control=MQTT_UNSUBSCRIBE, **kwargs)
                self.topics = kwargs.get(&#34;topics&#34;,[])
                topic = kwargs.get(&#34;topic&#34;, None)
                if topic:
                        self.topics.append(topic)

        def add_topic(self, topic):
                &#34;&#34;&#34; Add topics into subscribe &#34;&#34;&#34;
                self.topics.append(topic)

        def decode(self):
                &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
                self.identifier = self.get_int()
                self.topics = []
                while self.payload.tell() &lt; len(self.payload.getvalue()):
                        topic = self.get_string()
                        self.add_topic(topic)

        def encode(self):
                &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
                self.put_int(self.identifier)
                for topic in self.topics:
                        self.put_string(topic)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="lib.server.mqttmessages.MqttUnsubscribe.add_topic"><code class="name flex">
<span>def <span class="ident">add_topic</span></span>(<span>self, topic)</span>
</code></dt>
<dd>
<div class="desc"><p>Add topics into subscribe</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_topic(self, topic):
        &#34;&#34;&#34; Add topics into subscribe &#34;&#34;&#34;
        self.topics.append(topic)</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttUnsubscribe.decode"><code class="name flex">
<span>def <span class="ident">decode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Decode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def decode(self):
        &#34;&#34;&#34; Decode payload &#34;&#34;&#34;
        self.identifier = self.get_int()
        self.topics = []
        while self.payload.tell() &lt; len(self.payload.getvalue()):
                topic = self.get_string()
                self.add_topic(topic)</code></pre>
</details>
</dd>
<dt id="lib.server.mqttmessages.MqttUnsubscribe.encode"><code class="name flex">
<span>def <span class="ident">encode</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Encode payload</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def encode(self):
        &#34;&#34;&#34; Encode payload &#34;&#34;&#34;
        self.put_int(self.identifier)
        for topic in self.topics:
                self.put_string(topic)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></b></code>:
<ul class="hlist">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="lib.server" href="index.html">lib.server</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttConnAck" href="#lib.server.mqttmessages.MqttConnAck">MqttConnAck</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttConnAck.decode" href="#lib.server.mqttmessages.MqttConnAck.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttConnAck.encode" href="#lib.server.mqttmessages.MqttConnAck.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttConnect" href="#lib.server.mqttmessages.MqttConnect">MqttConnect</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttConnect.decode" href="#lib.server.mqttmessages.MqttConnect.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttConnect.encode" href="#lib.server.mqttmessages.MqttConnect.encode">encode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttConnect.get_flags" href="#lib.server.mqttmessages.MqttConnect.get_flags">get_flags</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttDisconnect" href="#lib.server.mqttmessages.MqttDisconnect">MqttDisconnect</a></code></h4>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttException" href="#lib.server.mqttmessages.MqttException">MqttException</a></code></h4>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttMessage" href="#lib.server.mqttmessages.MqttMessage">MqttMessage</a></code></h4>
<ul class="two-column">
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode" href="#lib.server.mqttmessages.MqttMessage.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.decode_header" href="#lib.server.mqttmessages.MqttMessage.decode_header">decode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode" href="#lib.server.mqttmessages.MqttMessage.encode">encode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_header" href="#lib.server.mqttmessages.MqttMessage.encode_header">encode_header</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.encode_length" href="#lib.server.mqttmessages.MqttMessage.encode_length">encode_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_byte" href="#lib.server.mqttmessages.MqttMessage.get_byte">get_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_int" href="#lib.server.mqttmessages.MqttMessage.get_int">get_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.get_string" href="#lib.server.mqttmessages.MqttMessage.get_string">get_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.identifier_base" href="#lib.server.mqttmessages.MqttMessage.identifier_base">identifier_base</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.init" href="#lib.server.mqttmessages.MqttMessage.init">init</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.messages" href="#lib.server.mqttmessages.MqttMessage.messages">messages</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_buffer" href="#lib.server.mqttmessages.MqttMessage.put_buffer">put_buffer</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_byte" href="#lib.server.mqttmessages.MqttMessage.put_byte">put_byte</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_int" href="#lib.server.mqttmessages.MqttMessage.put_int">put_int</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.put_string" href="#lib.server.mqttmessages.MqttMessage.put_string">put_string</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read" href="#lib.server.mqttmessages.MqttMessage.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.read_length" href="#lib.server.mqttmessages.MqttMessage.read_length">read_length</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.receive" href="#lib.server.mqttmessages.MqttMessage.receive">receive</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write" href="#lib.server.mqttmessages.MqttMessage.write">write</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttMessage.write_length" href="#lib.server.mqttmessages.MqttMessage.write_length">write_length</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttPingReq" href="#lib.server.mqttmessages.MqttPingReq">MqttPingReq</a></code></h4>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttPingResp" href="#lib.server.mqttmessages.MqttPingResp">MqttPingResp</a></code></h4>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttPubAck" href="#lib.server.mqttmessages.MqttPubAck">MqttPubAck</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttPubAck.decode" href="#lib.server.mqttmessages.MqttPubAck.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttPubAck.encode" href="#lib.server.mqttmessages.MqttPubAck.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttPubComp" href="#lib.server.mqttmessages.MqttPubComp">MqttPubComp</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttPubComp.decode" href="#lib.server.mqttmessages.MqttPubComp.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttPubComp.encode" href="#lib.server.mqttmessages.MqttPubComp.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttPubRec" href="#lib.server.mqttmessages.MqttPubRec">MqttPubRec</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttPubRec.decode" href="#lib.server.mqttmessages.MqttPubRec.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttPubRec.encode" href="#lib.server.mqttmessages.MqttPubRec.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttPubRel" href="#lib.server.mqttmessages.MqttPubRel">MqttPubRel</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttPubRel.decode" href="#lib.server.mqttmessages.MqttPubRel.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttPubRel.encode" href="#lib.server.mqttmessages.MqttPubRel.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttPublish" href="#lib.server.mqttmessages.MqttPublish">MqttPublish</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttPublish.decode" href="#lib.server.mqttmessages.MqttPublish.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttPublish.encode" href="#lib.server.mqttmessages.MqttPublish.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttStream" href="#lib.server.mqttmessages.MqttStream">MqttStream</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttStream.dump" href="#lib.server.mqttmessages.MqttStream.dump">dump</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttStream.read" href="#lib.server.mqttmessages.MqttStream.read">read</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttStream.write" href="#lib.server.mqttmessages.MqttStream.write">write</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttSubAck" href="#lib.server.mqttmessages.MqttSubAck">MqttSubAck</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttSubAck.decode" href="#lib.server.mqttmessages.MqttSubAck.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttSubAck.encode" href="#lib.server.mqttmessages.MqttSubAck.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttSubscribe" href="#lib.server.mqttmessages.MqttSubscribe">MqttSubscribe</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttSubscribe.add_topic" href="#lib.server.mqttmessages.MqttSubscribe.add_topic">add_topic</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttSubscribe.decode" href="#lib.server.mqttmessages.MqttSubscribe.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttSubscribe.encode" href="#lib.server.mqttmessages.MqttSubscribe.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttUnSubAck" href="#lib.server.mqttmessages.MqttUnSubAck">MqttUnSubAck</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttUnSubAck.decode" href="#lib.server.mqttmessages.MqttUnSubAck.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttUnSubAck.encode" href="#lib.server.mqttmessages.MqttUnSubAck.encode">encode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="lib.server.mqttmessages.MqttUnsubscribe" href="#lib.server.mqttmessages.MqttUnsubscribe">MqttUnsubscribe</a></code></h4>
<ul class="">
<li><code><a title="lib.server.mqttmessages.MqttUnsubscribe.add_topic" href="#lib.server.mqttmessages.MqttUnsubscribe.add_topic">add_topic</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttUnsubscribe.decode" href="#lib.server.mqttmessages.MqttUnsubscribe.decode">decode</a></code></li>
<li><code><a title="lib.server.mqttmessages.MqttUnsubscribe.encode" href="#lib.server.mqttmessages.MqttUnsubscribe.encode">encode</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>