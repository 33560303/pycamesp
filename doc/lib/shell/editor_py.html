<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>lib.shell.editor_py API documentation</title>
<meta name="description" content="Syntax highlight for python in the editor" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>lib.shell.editor_py</code></h1>
</header>
<section id="section-intro">
<p>Syntax highlight for python in the editor</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># Distributed under Pycameresp License
# Copyright (c) 2023 Remi BERTHOLET
# pylint:disable=consider-iterating-dictionary
&#34;&#34;&#34; Syntax highlight for python in the editor &#34;&#34;&#34;
PYTHON_KEYWORDS = b&#34;and as assert break class continue def del elif else except exec finally for from global if import in is lambda None not or pass print raise return try while self as join abs apply bool buffer callable chr cmp coerce compile complex delattr dir dict divmod eval execfile filter float getattr globals hasattr hash hex id input int intern isinstance issubclass len list locals long map max min oct open ord pow range raw_input reduce reload repr round setattr slice str tuple type unichr unicode vars xrange zip with yield True False async await&#34;

NO_COLOR       = b&#34;\x1B[m&#34;
STRING_COLOR   = b&#34;\x1B[31m&#34;
COMMENT_COLOR  = b&#34;\x1B[32m&#34;
NUMBER_COLOR   = b&#34;\x1B[33m&#34;
KEYWORD_COLOR  = b&#34;\x1B[1;34m&#34;
CLASS_COLOR    = b&#34;\x1B[1;35m&#34;
FUNCTION_COLOR = b&#34;\x1B[1;36m&#34;

class Colorizer:
        &#34;&#34;&#34; Syntax highlight for python &#34;&#34;&#34;
        def __init__(self):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                keywords = PYTHON_KEYWORDS.split(b&#34; &#34;)
                keywords.sort()
                self.lexicon = {}
                for keyword in keywords:
                        self.lexicon.setdefault(keyword[0],[]).append(keyword)

        def colorize(self, text, out):
                &#34;&#34;&#34; Colorize python file &#34;&#34;&#34;
                STATE_UNDEFINED      = 0
                STATE_KEYWORD        = 1
                STATE_NUMBER         = 2
                STATE_COMMENT        = 3
                STATE_DECIMAL        = 4
                STATE_EXPONENT       = 5
                STATE_BINARY         = 6
                STATE_OCTAL          = 7
                STATE_HEXA           = 8
                STATE_STRING         = 9
                STATE_STRING_CONTENT = 10
                STATE_STRING_ESCAPE  = 11
                STATE_FUNCTION       = 12
                STATE_CLASS          = 13
                state = STATE_UNDEFINED
                pos = 0
                lastpos = 0
                j = 0
                previous_char = 0
                for char in text:
                        charactere = char.to_bytes(1,&#34;big&#34;)
                        # If nothind detected
                        if   state == STATE_UNDEFINED:
                                word  = b&#34;&#34;
                                keywords = None
                                pos = -1
                                # If a keyword start
                                if char in self.lexicon.keys():
                                        if not (0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F):
                                                pos = j
                                                state = STATE_KEYWORD
                                                word  = charactere
                                                keywords = self.lexicon[char]
                                # If decimal number started
                                elif 0x31 &lt;= char &lt;= 0x39:
                                        if 0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F:
                                                pass
                                        else:
                                                state = STATE_DECIMAL
                                                word = charactere
                                                pos = j
                                # If base number started
                                elif char == 0x30:
                                        if 0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F:
                                                pass
                                        else:
                                                state = STATE_NUMBER
                                                word = charactere
                                                pos = j
                                # If comment detected
                                elif char == 0x23:
                                        pos = j
                                        state = STATE_COMMENT
                                        out.write(text[lastpos:j]+COMMENT_COLOR+text[j:]+NO_COLOR)
                                        lastpos = len(text)
                                        break
                                # If string detected
                                elif char == 0x22 or char == 0x27:
                                        state = STATE_STRING
                                        word = charactere
                                        pos = j
                        # If keyword started
                        elif state == STATE_KEYWORD:
                                # If a keyword continue
                                if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or char == 0x5F:
                                        tmp_word = word + charactere
                                        count = 0
                                        for kwd in keywords:
                                                if kwd.find(word) == 0:
                                                        count += 1
                                        if count &gt; 0:
                                                word = tmp_word
                                else:
                                        # If special string detected
                                        if (char == 0x27 or char == 0x22) and len(word) == 1:
                                                # Byte string
                                                if word[0] == 0x62 or word[0] == 0x42:
                                                        word = charactere
                                                        pos = j
                                                        state = STATE_STRING
                                                # Regular string
                                                elif word[0] == 0x52 or word[0] == 0x72:
                                                        word = charactere
                                                        pos = j
                                                        state = STATE_STRING
                                                # Unicode string
                                                elif word[0] == 0x55 or word[0] == 0x75:
                                                        word = charactere
                                                        pos = j
                                                        state = STATE_STRING
                                                else:
                                                        word  = b&#34;&#34;
                                                        state = STATE_UNDEFINED
                                                        keywords = None
                                        else:
                                                if word in keywords:
                                                        out.write(text[lastpos:pos]+KEYWORD_COLOR+word+NO_COLOR)
                                                        if word == b&#34;def&#34;:
                                                                state = STATE_FUNCTION
                                                                lastpos = j
                                                                word  = charactere
                                                                keywords = None
                                                        elif word == b&#34;class&#34;:
                                                                state = STATE_CLASS
                                                                lastpos = j
                                                                word  = charactere
                                                                keywords = None
                                                        else:
                                                                lastpos = j
                                                                word  = b&#34;&#34;
                                                                state = STATE_UNDEFINED
                                                                keywords = None
                                                else:
                                                        word  = b&#34;&#34;
                                                        state = STATE_UNDEFINED
                                                        keywords = None
                        # If function name
                        elif state == STATE_FUNCTION:
                                if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or 0x30 &lt;= char &lt;= 0x39 or char == 0x5F or char == 0x20 or char == 0x09:
                                        word += charactere
                                else:
                                        out.write(text[lastpos:pos]+FUNCTION_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                                        word  = b&#34;&#34;
                                        keywords = None
                        # If class name
                        elif state == STATE_CLASS:
                                if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or 0x30 &lt;= char &lt;= 0x39 or char == 0x5F or char == 0x20 or char == 0x09:
                                        word += charactere
                                else:
                                        out.write(text[lastpos:pos]+CLASS_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                                        word  = b&#34;&#34;
                                        keywords = None
                        # If decimal detected
                        elif state == STATE_DECIMAL:
                                if char &gt;= 0x30 and char &lt;= 0x39 or char == 0x5F:
                                        word += charactere
                                elif char == 0x2E:
                                        if b&#34;.&#34; not in word:
                                                word += charactere
                                        else:
                                                state = STATE_UNDEFINED
                                elif char == 0x45 or char == 0x65:
                                        word += charactere
                                        state = STATE_EXPONENT
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If decimal with exponent
                        elif state == STATE_EXPONENT:
                                if char &gt;= 0x30 and char &lt;= 0x39:
                                        word += charactere
                                elif char == 0x2B or char == 0x2D:
                                        if b&#34;+&#34; in word or b&#34;-&#34; in word:
                                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                                lastpos = j
                                                state = STATE_UNDEFINED
                                        else:
                                                word += charactere
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If number detected
                        elif state == STATE_NUMBER:
                                # If hexa number detected
                                if char == 0x58 or char == 0x78:
                                        word += charactere
                                        state = STATE_HEXA
                                # If octal number detected
                                elif char == 0x4F or char == 0x6F:
                                        word += charactere
                                        state = STATE_OCTAL
                                # If binary number detected
                                elif char == 0x42 or char == 0x62:
                                        word += charactere
                                        state = STATE_BINARY
                                else:
                                        if char == 0x2E:
                                                state = STATE_DECIMAL
                                                word += charactere
                                        elif 0x30 &lt;= char &lt;= 0x39 or 0x41 &lt;= char &lt;= 0x46 or 0x61 &lt;= char &lt;= 0x66 or char == 0x5F:
                                                state = STATE_UNDEFINED
                                                word  = b&#34;&#34;
                                        else:
                                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                                lastpos = j
                                                state = STATE_UNDEFINED
                        # If hexa number
                        elif state == STATE_HEXA:
                                # If hexa detected
                                if 0x30 &lt;= char &lt;= 0x39 or 0x41 &lt;= char &lt;= 0x46 or 0x61 &lt;= char &lt;= 0x66:
                                        word += charactere
                                # If not hexa detected
                                elif 0x47 &lt;= char &lt;= 0x5A or 0x67 &lt;= char &lt;= 0x7A:
                                        state = STATE_UNDEFINED
                                # If the number ended
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If octal number
                        elif state == STATE_OCTAL:
                                # If hexa detected
                                if 0x30 &lt;= char &lt;= 0x37:
                                        word += charactere
                                # If the number ended
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If binary number
                        elif state == STATE_BINARY:
                                # If hexa detected
                                if 0x30 &lt;= char &lt;= 0x31:
                                        word += charactere
                                # If the number ended
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If string started
                        elif state == STATE_STRING:
                                if char == word[0]:
                                        word += charactere
                                        if len(word) == 3:
                                                state = STATE_STRING_CONTENT
                                else:
                                        if len(word) == 2:
                                                out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                lastpos = j
                                                state = STATE_UNDEFINED
                                        elif char == 0x5C:
                                                word += charactere
                                                state = STATE_STRING_ESCAPE
                                        else:
                                                word += charactere
                                                state = STATE_STRING_CONTENT
                        # If escape in string
                        elif state == STATE_STRING_ESCAPE:
                                word += charactere
                                state = STATE_STRING_CONTENT
                        # If string content
                        elif state == STATE_STRING_CONTENT:
                                # String terminated maybe
                                if word[0] == char:
                                        word += charactere
                                        if len(word) &gt;= 6:
                                                if word[:3] == b&#39;&#34;&#34;&#34;&#39; or word[:3] == b&#34;&#39;&#39;&#39;&#34;:
                                                        if word[:3] == word[-3:]:
                                                                out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                                lastpos = j+1
                                                                state = STATE_UNDEFINED
                                                elif word[0] == word[-1]:
                                                        out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                        lastpos = j+1
                                                        state = STATE_UNDEFINED
                                        elif len(word) &gt;= 2:
                                                if word[0] == word[-1]:
                                                        out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                        lastpos = j+1
                                                        state = STATE_UNDEFINED
                                elif char == 0x5C:
                                        word += charactere
                                        state = STATE_STRING_ESCAPE
                                else:
                                        word += charactere

                        previous_char = char
                        j += 1

                if state in [STATE_NUMBER, STATE_HEXA, STATE_OCTAL, STATE_BINARY, STATE_DECIMAL, STATE_EXPONENT]:
                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                elif state == STATE_KEYWORD:
                        if word in keywords:
                                out.write(text[lastpos:pos]+KEYWORD_COLOR+word+NO_COLOR)
                        else:
                                out.write(text[lastpos:])
                elif lastpos &lt; len(text):
                        out.write(text[lastpos:])</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="lib.shell.editor_py.Colorizer"><code class="flex name class">
<span>class <span class="ident">Colorizer</span></span>
</code></dt>
<dd>
<div class="desc"><p>Syntax highlight for python </p>
<p>Constructor</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Colorizer:
        &#34;&#34;&#34; Syntax highlight for python &#34;&#34;&#34;
        def __init__(self):
                &#34;&#34;&#34; Constructor &#34;&#34;&#34;
                keywords = PYTHON_KEYWORDS.split(b&#34; &#34;)
                keywords.sort()
                self.lexicon = {}
                for keyword in keywords:
                        self.lexicon.setdefault(keyword[0],[]).append(keyword)

        def colorize(self, text, out):
                &#34;&#34;&#34; Colorize python file &#34;&#34;&#34;
                STATE_UNDEFINED      = 0
                STATE_KEYWORD        = 1
                STATE_NUMBER         = 2
                STATE_COMMENT        = 3
                STATE_DECIMAL        = 4
                STATE_EXPONENT       = 5
                STATE_BINARY         = 6
                STATE_OCTAL          = 7
                STATE_HEXA           = 8
                STATE_STRING         = 9
                STATE_STRING_CONTENT = 10
                STATE_STRING_ESCAPE  = 11
                STATE_FUNCTION       = 12
                STATE_CLASS          = 13
                state = STATE_UNDEFINED
                pos = 0
                lastpos = 0
                j = 0
                previous_char = 0
                for char in text:
                        charactere = char.to_bytes(1,&#34;big&#34;)
                        # If nothind detected
                        if   state == STATE_UNDEFINED:
                                word  = b&#34;&#34;
                                keywords = None
                                pos = -1
                                # If a keyword start
                                if char in self.lexicon.keys():
                                        if not (0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F):
                                                pos = j
                                                state = STATE_KEYWORD
                                                word  = charactere
                                                keywords = self.lexicon[char]
                                # If decimal number started
                                elif 0x31 &lt;= char &lt;= 0x39:
                                        if 0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F:
                                                pass
                                        else:
                                                state = STATE_DECIMAL
                                                word = charactere
                                                pos = j
                                # If base number started
                                elif char == 0x30:
                                        if 0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F:
                                                pass
                                        else:
                                                state = STATE_NUMBER
                                                word = charactere
                                                pos = j
                                # If comment detected
                                elif char == 0x23:
                                        pos = j
                                        state = STATE_COMMENT
                                        out.write(text[lastpos:j]+COMMENT_COLOR+text[j:]+NO_COLOR)
                                        lastpos = len(text)
                                        break
                                # If string detected
                                elif char == 0x22 or char == 0x27:
                                        state = STATE_STRING
                                        word = charactere
                                        pos = j
                        # If keyword started
                        elif state == STATE_KEYWORD:
                                # If a keyword continue
                                if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or char == 0x5F:
                                        tmp_word = word + charactere
                                        count = 0
                                        for kwd in keywords:
                                                if kwd.find(word) == 0:
                                                        count += 1
                                        if count &gt; 0:
                                                word = tmp_word
                                else:
                                        # If special string detected
                                        if (char == 0x27 or char == 0x22) and len(word) == 1:
                                                # Byte string
                                                if word[0] == 0x62 or word[0] == 0x42:
                                                        word = charactere
                                                        pos = j
                                                        state = STATE_STRING
                                                # Regular string
                                                elif word[0] == 0x52 or word[0] == 0x72:
                                                        word = charactere
                                                        pos = j
                                                        state = STATE_STRING
                                                # Unicode string
                                                elif word[0] == 0x55 or word[0] == 0x75:
                                                        word = charactere
                                                        pos = j
                                                        state = STATE_STRING
                                                else:
                                                        word  = b&#34;&#34;
                                                        state = STATE_UNDEFINED
                                                        keywords = None
                                        else:
                                                if word in keywords:
                                                        out.write(text[lastpos:pos]+KEYWORD_COLOR+word+NO_COLOR)
                                                        if word == b&#34;def&#34;:
                                                                state = STATE_FUNCTION
                                                                lastpos = j
                                                                word  = charactere
                                                                keywords = None
                                                        elif word == b&#34;class&#34;:
                                                                state = STATE_CLASS
                                                                lastpos = j
                                                                word  = charactere
                                                                keywords = None
                                                        else:
                                                                lastpos = j
                                                                word  = b&#34;&#34;
                                                                state = STATE_UNDEFINED
                                                                keywords = None
                                                else:
                                                        word  = b&#34;&#34;
                                                        state = STATE_UNDEFINED
                                                        keywords = None
                        # If function name
                        elif state == STATE_FUNCTION:
                                if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or 0x30 &lt;= char &lt;= 0x39 or char == 0x5F or char == 0x20 or char == 0x09:
                                        word += charactere
                                else:
                                        out.write(text[lastpos:pos]+FUNCTION_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                                        word  = b&#34;&#34;
                                        keywords = None
                        # If class name
                        elif state == STATE_CLASS:
                                if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or 0x30 &lt;= char &lt;= 0x39 or char == 0x5F or char == 0x20 or char == 0x09:
                                        word += charactere
                                else:
                                        out.write(text[lastpos:pos]+CLASS_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                                        word  = b&#34;&#34;
                                        keywords = None
                        # If decimal detected
                        elif state == STATE_DECIMAL:
                                if char &gt;= 0x30 and char &lt;= 0x39 or char == 0x5F:
                                        word += charactere
                                elif char == 0x2E:
                                        if b&#34;.&#34; not in word:
                                                word += charactere
                                        else:
                                                state = STATE_UNDEFINED
                                elif char == 0x45 or char == 0x65:
                                        word += charactere
                                        state = STATE_EXPONENT
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If decimal with exponent
                        elif state == STATE_EXPONENT:
                                if char &gt;= 0x30 and char &lt;= 0x39:
                                        word += charactere
                                elif char == 0x2B or char == 0x2D:
                                        if b&#34;+&#34; in word or b&#34;-&#34; in word:
                                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                                lastpos = j
                                                state = STATE_UNDEFINED
                                        else:
                                                word += charactere
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If number detected
                        elif state == STATE_NUMBER:
                                # If hexa number detected
                                if char == 0x58 or char == 0x78:
                                        word += charactere
                                        state = STATE_HEXA
                                # If octal number detected
                                elif char == 0x4F or char == 0x6F:
                                        word += charactere
                                        state = STATE_OCTAL
                                # If binary number detected
                                elif char == 0x42 or char == 0x62:
                                        word += charactere
                                        state = STATE_BINARY
                                else:
                                        if char == 0x2E:
                                                state = STATE_DECIMAL
                                                word += charactere
                                        elif 0x30 &lt;= char &lt;= 0x39 or 0x41 &lt;= char &lt;= 0x46 or 0x61 &lt;= char &lt;= 0x66 or char == 0x5F:
                                                state = STATE_UNDEFINED
                                                word  = b&#34;&#34;
                                        else:
                                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                                lastpos = j
                                                state = STATE_UNDEFINED
                        # If hexa number
                        elif state == STATE_HEXA:
                                # If hexa detected
                                if 0x30 &lt;= char &lt;= 0x39 or 0x41 &lt;= char &lt;= 0x46 or 0x61 &lt;= char &lt;= 0x66:
                                        word += charactere
                                # If not hexa detected
                                elif 0x47 &lt;= char &lt;= 0x5A or 0x67 &lt;= char &lt;= 0x7A:
                                        state = STATE_UNDEFINED
                                # If the number ended
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If octal number
                        elif state == STATE_OCTAL:
                                # If hexa detected
                                if 0x30 &lt;= char &lt;= 0x37:
                                        word += charactere
                                # If the number ended
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If binary number
                        elif state == STATE_BINARY:
                                # If hexa detected
                                if 0x30 &lt;= char &lt;= 0x31:
                                        word += charactere
                                # If the number ended
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                        # If string started
                        elif state == STATE_STRING:
                                if char == word[0]:
                                        word += charactere
                                        if len(word) == 3:
                                                state = STATE_STRING_CONTENT
                                else:
                                        if len(word) == 2:
                                                out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                lastpos = j
                                                state = STATE_UNDEFINED
                                        elif char == 0x5C:
                                                word += charactere
                                                state = STATE_STRING_ESCAPE
                                        else:
                                                word += charactere
                                                state = STATE_STRING_CONTENT
                        # If escape in string
                        elif state == STATE_STRING_ESCAPE:
                                word += charactere
                                state = STATE_STRING_CONTENT
                        # If string content
                        elif state == STATE_STRING_CONTENT:
                                # String terminated maybe
                                if word[0] == char:
                                        word += charactere
                                        if len(word) &gt;= 6:
                                                if word[:3] == b&#39;&#34;&#34;&#34;&#39; or word[:3] == b&#34;&#39;&#39;&#39;&#34;:
                                                        if word[:3] == word[-3:]:
                                                                out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                                lastpos = j+1
                                                                state = STATE_UNDEFINED
                                                elif word[0] == word[-1]:
                                                        out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                        lastpos = j+1
                                                        state = STATE_UNDEFINED
                                        elif len(word) &gt;= 2:
                                                if word[0] == word[-1]:
                                                        out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                        lastpos = j+1
                                                        state = STATE_UNDEFINED
                                elif char == 0x5C:
                                        word += charactere
                                        state = STATE_STRING_ESCAPE
                                else:
                                        word += charactere

                        previous_char = char
                        j += 1

                if state in [STATE_NUMBER, STATE_HEXA, STATE_OCTAL, STATE_BINARY, STATE_DECIMAL, STATE_EXPONENT]:
                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                elif state == STATE_KEYWORD:
                        if word in keywords:
                                out.write(text[lastpos:pos]+KEYWORD_COLOR+word+NO_COLOR)
                        else:
                                out.write(text[lastpos:])
                elif lastpos &lt; len(text):
                        out.write(text[lastpos:])</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="lib.shell.editor_py.Colorizer.colorize"><code class="name flex">
<span>def <span class="ident">colorize</span></span>(<span>self, text, out)</span>
</code></dt>
<dd>
<div class="desc"><p>Colorize python file</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def colorize(self, text, out):
        &#34;&#34;&#34; Colorize python file &#34;&#34;&#34;
        STATE_UNDEFINED      = 0
        STATE_KEYWORD        = 1
        STATE_NUMBER         = 2
        STATE_COMMENT        = 3
        STATE_DECIMAL        = 4
        STATE_EXPONENT       = 5
        STATE_BINARY         = 6
        STATE_OCTAL          = 7
        STATE_HEXA           = 8
        STATE_STRING         = 9
        STATE_STRING_CONTENT = 10
        STATE_STRING_ESCAPE  = 11
        STATE_FUNCTION       = 12
        STATE_CLASS          = 13
        state = STATE_UNDEFINED
        pos = 0
        lastpos = 0
        j = 0
        previous_char = 0
        for char in text:
                charactere = char.to_bytes(1,&#34;big&#34;)
                # If nothind detected
                if   state == STATE_UNDEFINED:
                        word  = b&#34;&#34;
                        keywords = None
                        pos = -1
                        # If a keyword start
                        if char in self.lexicon.keys():
                                if not (0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F):
                                        pos = j
                                        state = STATE_KEYWORD
                                        word  = charactere
                                        keywords = self.lexicon[char]
                        # If decimal number started
                        elif 0x31 &lt;= char &lt;= 0x39:
                                if 0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F:
                                        pass
                                else:
                                        state = STATE_DECIMAL
                                        word = charactere
                                        pos = j
                        # If base number started
                        elif char == 0x30:
                                if 0x41 &lt;= previous_char &lt;= 0x5A or 0x61 &lt;= previous_char &lt;= 0x7A or 0x30 &lt;= previous_char &lt;= 0x39 or previous_char == 0x5F:
                                        pass
                                else:
                                        state = STATE_NUMBER
                                        word = charactere
                                        pos = j
                        # If comment detected
                        elif char == 0x23:
                                pos = j
                                state = STATE_COMMENT
                                out.write(text[lastpos:j]+COMMENT_COLOR+text[j:]+NO_COLOR)
                                lastpos = len(text)
                                break
                        # If string detected
                        elif char == 0x22 or char == 0x27:
                                state = STATE_STRING
                                word = charactere
                                pos = j
                # If keyword started
                elif state == STATE_KEYWORD:
                        # If a keyword continue
                        if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or char == 0x5F:
                                tmp_word = word + charactere
                                count = 0
                                for kwd in keywords:
                                        if kwd.find(word) == 0:
                                                count += 1
                                if count &gt; 0:
                                        word = tmp_word
                        else:
                                # If special string detected
                                if (char == 0x27 or char == 0x22) and len(word) == 1:
                                        # Byte string
                                        if word[0] == 0x62 or word[0] == 0x42:
                                                word = charactere
                                                pos = j
                                                state = STATE_STRING
                                        # Regular string
                                        elif word[0] == 0x52 or word[0] == 0x72:
                                                word = charactere
                                                pos = j
                                                state = STATE_STRING
                                        # Unicode string
                                        elif word[0] == 0x55 or word[0] == 0x75:
                                                word = charactere
                                                pos = j
                                                state = STATE_STRING
                                        else:
                                                word  = b&#34;&#34;
                                                state = STATE_UNDEFINED
                                                keywords = None
                                else:
                                        if word in keywords:
                                                out.write(text[lastpos:pos]+KEYWORD_COLOR+word+NO_COLOR)
                                                if word == b&#34;def&#34;:
                                                        state = STATE_FUNCTION
                                                        lastpos = j
                                                        word  = charactere
                                                        keywords = None
                                                elif word == b&#34;class&#34;:
                                                        state = STATE_CLASS
                                                        lastpos = j
                                                        word  = charactere
                                                        keywords = None
                                                else:
                                                        lastpos = j
                                                        word  = b&#34;&#34;
                                                        state = STATE_UNDEFINED
                                                        keywords = None
                                        else:
                                                word  = b&#34;&#34;
                                                state = STATE_UNDEFINED
                                                keywords = None
                # If function name
                elif state == STATE_FUNCTION:
                        if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or 0x30 &lt;= char &lt;= 0x39 or char == 0x5F or char == 0x20 or char == 0x09:
                                word += charactere
                        else:
                                out.write(text[lastpos:pos]+FUNCTION_COLOR+word+NO_COLOR)
                                lastpos = j
                                state = STATE_UNDEFINED
                                word  = b&#34;&#34;
                                keywords = None
                # If class name
                elif state == STATE_CLASS:
                        if 0x41 &lt;= char &lt;= 0x5A or 0x61 &lt;= char &lt;= 0x7A or 0x30 &lt;= char &lt;= 0x39 or char == 0x5F or char == 0x20 or char == 0x09:
                                word += charactere
                        else:
                                out.write(text[lastpos:pos]+CLASS_COLOR+word+NO_COLOR)
                                lastpos = j
                                state = STATE_UNDEFINED
                                word  = b&#34;&#34;
                                keywords = None
                # If decimal detected
                elif state == STATE_DECIMAL:
                        if char &gt;= 0x30 and char &lt;= 0x39 or char == 0x5F:
                                word += charactere
                        elif char == 0x2E:
                                if b&#34;.&#34; not in word:
                                        word += charactere
                                else:
                                        state = STATE_UNDEFINED
                        elif char == 0x45 or char == 0x65:
                                word += charactere
                                state = STATE_EXPONENT
                        else:
                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                lastpos = j
                                state = STATE_UNDEFINED
                # If decimal with exponent
                elif state == STATE_EXPONENT:
                        if char &gt;= 0x30 and char &lt;= 0x39:
                                word += charactere
                        elif char == 0x2B or char == 0x2D:
                                if b&#34;+&#34; in word or b&#34;-&#34; in word:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                                else:
                                        word += charactere
                        else:
                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                lastpos = j
                                state = STATE_UNDEFINED
                # If number detected
                elif state == STATE_NUMBER:
                        # If hexa number detected
                        if char == 0x58 or char == 0x78:
                                word += charactere
                                state = STATE_HEXA
                        # If octal number detected
                        elif char == 0x4F or char == 0x6F:
                                word += charactere
                                state = STATE_OCTAL
                        # If binary number detected
                        elif char == 0x42 or char == 0x62:
                                word += charactere
                                state = STATE_BINARY
                        else:
                                if char == 0x2E:
                                        state = STATE_DECIMAL
                                        word += charactere
                                elif 0x30 &lt;= char &lt;= 0x39 or 0x41 &lt;= char &lt;= 0x46 or 0x61 &lt;= char &lt;= 0x66 or char == 0x5F:
                                        state = STATE_UNDEFINED
                                        word  = b&#34;&#34;
                                else:
                                        out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                # If hexa number
                elif state == STATE_HEXA:
                        # If hexa detected
                        if 0x30 &lt;= char &lt;= 0x39 or 0x41 &lt;= char &lt;= 0x46 or 0x61 &lt;= char &lt;= 0x66:
                                word += charactere
                        # If not hexa detected
                        elif 0x47 &lt;= char &lt;= 0x5A or 0x67 &lt;= char &lt;= 0x7A:
                                state = STATE_UNDEFINED
                        # If the number ended
                        else:
                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                lastpos = j
                                state = STATE_UNDEFINED
                # If octal number
                elif state == STATE_OCTAL:
                        # If hexa detected
                        if 0x30 &lt;= char &lt;= 0x37:
                                word += charactere
                        # If the number ended
                        else:
                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                lastpos = j
                                state = STATE_UNDEFINED
                # If binary number
                elif state == STATE_BINARY:
                        # If hexa detected
                        if 0x30 &lt;= char &lt;= 0x31:
                                word += charactere
                        # If the number ended
                        else:
                                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
                                lastpos = j
                                state = STATE_UNDEFINED
                # If string started
                elif state == STATE_STRING:
                        if char == word[0]:
                                word += charactere
                                if len(word) == 3:
                                        state = STATE_STRING_CONTENT
                        else:
                                if len(word) == 2:
                                        out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                        lastpos = j
                                        state = STATE_UNDEFINED
                                elif char == 0x5C:
                                        word += charactere
                                        state = STATE_STRING_ESCAPE
                                else:
                                        word += charactere
                                        state = STATE_STRING_CONTENT
                # If escape in string
                elif state == STATE_STRING_ESCAPE:
                        word += charactere
                        state = STATE_STRING_CONTENT
                # If string content
                elif state == STATE_STRING_CONTENT:
                        # String terminated maybe
                        if word[0] == char:
                                word += charactere
                                if len(word) &gt;= 6:
                                        if word[:3] == b&#39;&#34;&#34;&#34;&#39; or word[:3] == b&#34;&#39;&#39;&#39;&#34;:
                                                if word[:3] == word[-3:]:
                                                        out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                        lastpos = j+1
                                                        state = STATE_UNDEFINED
                                        elif word[0] == word[-1]:
                                                out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                lastpos = j+1
                                                state = STATE_UNDEFINED
                                elif len(word) &gt;= 2:
                                        if word[0] == word[-1]:
                                                out.write(text[lastpos:pos]+STRING_COLOR+word+NO_COLOR)
                                                lastpos = j+1
                                                state = STATE_UNDEFINED
                        elif char == 0x5C:
                                word += charactere
                                state = STATE_STRING_ESCAPE
                        else:
                                word += charactere

                previous_char = char
                j += 1

        if state in [STATE_NUMBER, STATE_HEXA, STATE_OCTAL, STATE_BINARY, STATE_DECIMAL, STATE_EXPONENT]:
                out.write(text[lastpos:pos]+NUMBER_COLOR+word+NO_COLOR)
        elif state == STATE_KEYWORD:
                if word in keywords:
                        out.write(text[lastpos:pos]+KEYWORD_COLOR+word+NO_COLOR)
                else:
                        out.write(text[lastpos:])
        elif lastpos &lt; len(text):
                out.write(text[lastpos:])</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="lib.shell" href="index.html">lib.shell</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="lib.shell.editor_py.Colorizer" href="#lib.shell.editor_py.Colorizer">Colorizer</a></code></h4>
<ul class="">
<li><code><a title="lib.shell.editor_py.Colorizer.colorize" href="#lib.shell.editor_py.Colorizer.colorize">colorize</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>